<!doctype html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans|Poppins|Roboto&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="assets/styles/main.css">

	<title>Document</title>

	<style>
		.content__search-input {
			padding-left: 44px;
		}
	</style>

</head>
<body>
	<div class="page-body">
		<div class="sidebar">
			<div class="sidebar__logo">
				<img class="sidebar__logo-image" src="assets/images/logo.png" alt="">
				<div class="sidebar__logo-name">BECO</div>
			</div>
			<div class="sidebar__menu">
				<!-- menu-renderer.js -->
			</div>
			<div class="sidebar__expand-button">
				<svg width="48" height="106" viewBox="0 0 48 106" xmlns="http://www.w3.org/2000/svg"><path d="M0 0C0 11.7415 9.99255 16.1938 20.8591 21.0356C33.809 26.8055 48 33.1285 48 53C48 72.8715 33.809 79.1945 20.8591 84.9644C9.99255 89.8062 0 94.2585 0 106V0Z" fill="#F3F4F9"/></svg>
				<i class="sidebar__expand-button-icon icon-bars"></i>
			</div>
		</div>
		<div class="content">
			<div class="content__header">
				<div class="content__title">Развлечения</div>
				<div class="content__search">
					<i class="content__search-icon icon-search"></i>
					<input class="content__search-input" type="text" placeholder="Какой магазин вам нужен?">
				</div>
			</div>
			<div class="content__body">
				<div class="content__tiles">
					<!-- tile-renderer.js -->
				</div>
			</div>
		</div>
	</div>

<!--	Выглядит изящней, если запускать на сервере -->
<script type="module" src="assets/scripts/main.js"></script>

	<script>
		/*
		let itemsDefault = [
			{title: "Пробка на Мира", 	description: "Вечер для двоих", num: "-50%", label: "Скидка"},
			{title: "КИНО И НЕМЦЫ", description: "Бесплатный бокал пива", num: "ВАРВАР", label: "ПРОМОКОД"},
			{title: "valery cakes", description: "Торт", num: "30%", label: "скидка"},
			{title: "sushi sell", description: "Набор “Праздник”", num: "45%", label: "скидка"},
			{title: "mangosteen", description: "Фрукт в подарок", num: "J130", label: "купон"},
			{title: "теленок табака", description: "Стейк “Мачете”", num: "20%", label: "скидка"},
			{title: "fire food", description: "Вторая шаурма в подарок", num: "ОГОНЬ", label: "промокод"},
			{title: "aroma cremeria", description: "Джелато “Пармезан”", num: "20%", label: "Скидка"},
			{title: "пробка на мира", description: "Вечер для двоих", num: "J130", label: "КУПОН"},
			{title: "Кино и немцы", description: "Бесплатный бокал пива", num: "ВАРВАР", label: "ПРОМОКОД"},
			{title: "VALERY CAKES", description: "Торт", num: "30%", label: "скидка"},
			{title: "sushi sell", description: "Набор “Праздник”", num: "45%", label: "скидка"},

			{title: "Пробка на Мира", 	description: "Вечер для двоих", num: "-50%", label: "Скидка"},
			{title: "КИНО И НЕМЦЫ", description: "Бесплатный бокал пива", num: "ВАРВАР", label: "ПРОМОКОД"},
			{title: "valery cakes", description: "Торт", num: "30%", label: "скидка"},
			{title: "sushi sell", description: "Набор “Праздник”", num: "45%", label: "скидка"},
			{title: "mangosteen", description: "Фрукт в подарок", num: "J130", label: "купон"},
			{title: "теленок табака", description: "Стейк “Мачете”", num: "20%", label: "скидка"},
			{title: "fire food", description: "Вторая шаурма в подарок", num: "ОГОНЬ", label: "промокод"},
			{title: "aroma cremeria", description: "Джелато “Пармезан”", num: "20%", label: "Скидка"},
			{title: "пробка на мира", description: "Вечер для двоих", num: "J130", label: "КУПОН"},
			{title: "Кино и немцы", description: "Бесплатный бокал пива", num: "ВАРВАР", label: "ПРОМОКОД"},
			{title: "VALERY CAKES", description: "Торт", num: "30%", label: "скидка"},
			{title: "sushi sell", description: "Набор “Праздник”", num: "45%", label: "скидка"}
		];
		function tileRenderer(items = itemsDefault) {
			let index, result = "";
			for (index in items) {
				if (items.hasOwnProperty(index)) {
					result +=   '<div class="tile" tabindex="-1">' +
						'<div class="tile__text">' +
						'<div class="tile__top">' +
						`<div class="tile__title">${items[index].title}</div>` +
						`<div class="tile__description">${items[index].description}</div>` +
						'</div>' +
						'<div class="tile__bottom">' +
						`<div class="tile__num">${items[index].num}</div>` +
						`<div class="tile__label">${items[index].label}</div>` +
						'</div>' +
						'</div>' +
						`<img class="tile__image" src="assets/images/image ${(parseInt(index)%12)+1}.png" alt="">` +
						'<img class="tile__stroke" src="assets/images/tile-stroke.png" alt="">' +
						'<div class="tile__background">' +
						'<img class="tile__background-image" src="assets/images/tile-background.png" alt="">' +
						'<div class="tile__shadow tile__shadow_upper"></div>' +
						'<div class="tile__shadow tile__shadow_lower"></div>' +
						'</div>' +
						'</div>'
				}
			}
			document.querySelector('.content__tiles').innerHTML = result;
		}
		//===================================================================================================

		let menuItemsDefault = [
			{icon: "icon-tile",     title: "Каталог",       isActive: false},
			{icon: "icon-pulse",	title: "Здовроье",      isActive: false},
			{icon: "icon-heart",	title: "Красота",       isActive: false},
			{icon: "icon-cat", 	    title: "Развлечения",   isActive: true },
			{icon: "icon-truck",    title: "Авто",          isActive: false},
		];
		function menuRenderer(items = menuItemsDefault) {
			let index, result = "";
			for (index in items) {
				if (items.hasOwnProperty(index)) {
					result +=   '<div class="sidebar__menu-item">' +
						`<div class="sidebar__menu-item-inner${items[index].isActive ? ' sidebar__menu-item-inner_active' : ''}">` +
						`<i class="sidebar__menu-item-icon ${items[index].icon}"></i>` +
						`<span class="sidebar__menu-item-title">${items[index].title}</span>` +
						'</div>' +
						'</div>'
				}
			}
			document.querySelector('.sidebar__menu').innerHTML = result;
		}
		//===================================================================================================

		function menuExpander(event) {
			let target = event.target;

			target.classList.toggle('icon-cross');
			target.classList.toggle('icon-bars');
			document.querySelector('.sidebar').classList.toggle('sidebar_expanded')
		}
		//===================================================================================================

		let oldValue = -1;
		function scrollListener(event) {
			if (oldValue < event.target.scrollTop) {
				document.querySelector('.content__header').classList.add('content__header_shortened')
			} else {
				document.querySelector('.content__header').classList.remove('content__header_shortened')
			}
			oldValue = event.target.scrollTop;
		}
		//===================================================================================================

		function menuItemPicker (event) {
			let element = event.target;

			if (!element.classList.contains('sidebar__menu-item-inner')) {
				element = element.parentNode;
			}
			if (!element.classList.contains('sidebar__menu-item-inner_active')) {
				document.querySelector('.sidebar__menu-item-inner_active').classList.remove('sidebar__menu-item-inner_active');
				element.classList.add('sidebar__menu-item-inner_active');

				document.querySelector('.content__title').innerHTML = element.children[1].innerHTML;
			}
		}
		//===================================================================================================

		menuRenderer();
		tileRenderer();

		document.querySelector('.sidebar__expand-button-icon').addEventListener('click', menuExpander);
		document.querySelector('.content__body').addEventListener('scroll', scrollListener);

		document.querySelectorAll('.sidebar__menu-item-inner').forEach((item) => {
			item.addEventListener('click', menuItemPicker);
		});

		/**/
	</script>
</body>
</html>